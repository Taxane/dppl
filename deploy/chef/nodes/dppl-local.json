{
  "ntp": {
    "servers": ["0.pool.ntp.org", "1.pool.ntp.org",
                "2.pool.ntp.org", "3.pool.ntp.org"]
  },

  "build_essential": {
    "compiletime": true
  },

  "authorization": {
    "sudo": {
      "groups": ["admin", "sysadmin", "wheel"],
      "passwordless": "true"
    }
  },

  "postgresql": {
    "password": {
      "postgres": "postgres"
    }
  },

  "nginx": {
    "default_site_enabled": false,
    "gzip_comp_level": 5,
    "gzip_types": [
      "text/css",
      "text/plain",
      "text/x-component",
      "application/javascript",
      "application/json",
      "application/xml",
      "application/xhtml+xml",
      "application/x-font-ttf",
      "application/x-font-opentype",
      "application/vnd.ms-fontobject",
      "image/svg+xml",
      "image/x-icon"
    ]
  },

  "memcached": {
    "memory": 256,
    "listen": "127.0.0.1"
  },

  "user": {
    "data_bag_name": "users"
  },

  "users": ["deploy"],

  "virtualenvwrapper": {
    "workon_home": "/var/www/envs",
    "user": "deploy",
    "group": "www-data",
    "profile": "/home/deploy/.profile"
  },

  "app": {
    "user_id": "deploy",
    "sites": [{
        "name": "pxlpng.com",
        "repository": "git@github.com:blenderbox/dppl.git",
        "reference": "chef",
        "django": {
          "requirements": "requirements.txt",
          "settings": {
            "target": "source/settings/production.py",
            "link": "source/settings/local.py"
          }
        },
        "database": {
          "name": "pxlpng",
          "type": "postgresql"
        },
        "uwsgi": "deploy/uwsgi/pxlpng.com.ini",
        "nginx": "deploy/nginx/pxlpng.com"
    }]
  },

  "run_list": [
    // Base building blocks
    "recipe[apt]",
    "recipe[build-essential]",
    "recipe[ntp]",
    "recipe[git]",

    // Users recipes
    "recipe[dotfiles]",
    "recipe[user::data_bag]",
    "recipe[sudo]",

    // Server recipes
    "recipe[nginx]",
    "recipe[memcached]",

    // Database recipes
    "recipe[postgresql::client]",
    "recipe[postgresql::server]",
    "recipe[postgresql::ruby]",

    // Python recipes
    "recipe[uwsgi]",
    "recipe[virtualenvwrapper]",
    "recipe[django-app]"
  ]
}
